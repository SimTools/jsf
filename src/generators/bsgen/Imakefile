XCOMM  
XCOMM  $Id$
XCOMM

#include "conf/makejsf.tmpl"

PROGNAME = JSFBeamGeneration

JSFINSTALLDIR = ../../..

SRC     = $(PROGNAME).$(SrcSuf)

OBJS    = $(subst .$(SrcSuf),.$(ObjSuf),$(SRC)) \
	  lib$(PROGNAME).$(ObjSuf)

HDRS    = $(subst .$(SrcSuf),.h,$(SRC))


all:: install

install:: lib$(PROGNAME).$(DllSuf)
	install -p -m 755 lib$(PROGNAME).$(DllSuf) $(JSFINSTALLDIR)/lib
	install -p -m 644 JSFBeamGeneration.h $(JSFINSTALLDIR)/include

uninstall:: 
	rm -f $(JSFINSTALLDIR)/lib/lib$(PROGNAME).$(DllSuf)
	rm -f $(JSFINSTALLDIR)/include/JSFBeamGeneration.h

lib$(PROGNAME).$(DllSuf): $(OBJS) $(FOBJS)
	$(LD) $(SOFLAGS) $(OBJS) $(FOBJS) -o lib$(PROGNAME).$(DllSuf) $(ADDOBJ)

depend:: $(SRC) $(HDR)
	for i in $(SRC); do \
	rmkdepend -a -- $(DEPENDFILES) -- $$i; done


lib$(PROGNAME).$(SrcSuf): $(HDRS) $(PROGNAME)LinkDef.h
	rootcint -f $@ -c -I$(JSFROOT)/include \
	$(HDRS) $(PROGNAME)LinkDef.h 

clean::
	rm -f lib$(PROGNAME).*

distclean:: clean
	rm -f Makefile
	rm -f $(JSFROOT)/lib/lib$(PROGNAME).$(DylibSuf)
	rm -f genbeam.root genbeam2.root

web:
	jsf -q -b html.C


