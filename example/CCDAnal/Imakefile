#---------------------------------------------------
#$Id$
#
#include "conf/makejsf.tmpl"

ANALLIB   = -L$(JSFROOT)/lib -lJSF
LDFLAGS   = $(ANALLIB) $(GLIBS) 

FFLAGS = 
USEFORTRAN =



#-------------------------------------------------------------


OBJS          = CCDRawData.$(ObjSuf) \
	        CCDRawData3.$(ObjSuf) \
	        CCDCorrectDark.$(ObjSuf) \
	        CCDRawHist.$(ObjSuf) \
	        CCD2x2Cluster.$(ObjSuf) \
	        CCDDBS.$(ObjSuf) \
		libCCD.$(ObjSuf)

SRC           = CCDRawData.$(SrcSuf) \
		CCDRawData3.$(SrcSuf) \
		CCDCorrectDark.$(SrcSuf) \
		CCDRawHist.$(SrcSuf) \
		CCD2x2Cluster.$(SrcSuf) \
		CCDDBS.$(SrcSuf)

EVENTSO       = libCCD.$(DllSuf)

HDRS	      = CCDDBS.h CCDRawData.h CCDRawHist.h CCDCorrectDark.h \
		CCD2x2Cluster.h 

SONAME        = libCCD
PROGRAM       = $(SONAME).$(DllSuf)

all::   lib ccd

ccd: $(OBJS) jsfmain.o
	$(LD) jsfmain.o $(OBJS) $(LDFLAGS) -o ccd

lib:     $(OBJS)
	@echo "Linking libCCD.a ..."
	@/bin/rm -f libCCD.a
	ar -r libCCD.a $(OBJS)
	@cp -p libCCD.a ../../lib

clean:: 
	@rm -f $(OBJS) core *.so $(SONAME).$(SrcSuf) $(SONAME).h

depend:: 
	makedepend -I$(ROOTSYS)/include $(SRC)


distclean::
	@rm -f $(OBJS) core *.so $(SONAME).$(SrcSuf) $(SONAME).h *.~ *.o
	@rm -f PYTHIA.SEED *.bak
	@rm -f ccd jsf.root Makefile

###

$(SONAME).$(SrcSuf): $(HDRS) LinkDef.h
		@echo "Generating dictionary ..."
		rootcint -f $(SONAME).$(SrcSuf) \
	 	-c -I$(JSFROOT)/include $(HDRS) LinkDef.h

#---------------------------------------------------

.SUFFIXES: .$(SrcSuf)

.$(SrcSuf).$(ObjSuf):
	$(CXX) $(CXXFLAGS) -c $<
