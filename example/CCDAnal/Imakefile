#include "conf/makejsf.tmpl"

ANALLIB   = -L$(JSFROOT)/lib -lJSF
LDFLAGS   = $(ANALLIB) $(GLIBS) 

FFLAGS = 
USEFORTRAN =


SRC           = CCDRawData.$(SrcSuf) \
		CCDRawData3.$(SrcSuf) \
		CCDCorrectDark.$(SrcSuf) \
		CCDRawHist.$(SrcSuf) \
		CCD2x2Cluster.$(SrcSuf) \
		CCDDBS.$(SrcSuf)

OBJS          = $(subst .$(SrcSuf),.$(ObjSuf),$(SRC)) \
		libCCD.$(ObjSuf)

HDRS	      = CCDDBS.h CCDRawData.h CCDRawHist.h CCDCorrectDark.h \
		CCD2x2Cluster.h 

SOLIBNAME     = libCCD
PROGRAM       = $(SOLIBNAME).$(SOEXT)

all::   lib ccd

ccd: $(OBJS) jsfmain.o
	$(LD) jsfmain.o $(OBJS) $(LDFLAGS) -o ccd

lib:     $(OBJS)
	@echo "Linking libCCD.a ..."
	@/bin/rm -f libCCD.a
	ar -r libCCD.a $(OBJS)
	@cp -p libCCD.a ../../lib

clean:: 
	@rm -f $(OBJS) core *.so $(SOLIBNAME).*

depend:: 
	makedepend -I$(ROOTSYS)/include -I$(JSFROOT)/include $(SRC) $(HDRS)

web: lib ccd
	./ccd -b -q html.C

distclean::
	@rm -f $(OBJS) core *.so $(SOLIBNAME).*  *~  *.o
	@rm -f PYTHIA.SEED *.bak
	@rm -f ccd jsf.root Makefile

$(SOLIBNAME).$(SrcSuf): $(HDRS) LinkDef.h
		@echo "Generating dictionary ..."
		rootcint -f $(SOLIBNAME).$(SrcSuf) \
	 	-c -I$(JSFROOT)/include $(HDRS) LinkDef.h
