#---------------------------------------------------

#include    "config/lclib.tmpl"
#include    "conf/makejsf.tmpl"
CERNLIBS      = -L$(CERN_ROOT)/lib -ljetset74 -lpacklib
JSFLIBS       = -Wl,-L$(JSFROOT)/lib -lJSF -lJSFLCFULL -lJSFQuickSim

ROOTLIBS      = -L$(ROOTSYS)/lib \
		-lEGPythia -lEG $(CERNLIBS) \
		-lNew -lBase -lCint -lClib -lCont -lFunc \
                -lGraf -lGraf3d -lHist -lHtml -lMatrix -lMeta -lMinuit -lNet \
                -lPostscript -lProof -lTree -lUnix -lZip

ROOTGLIBS     = -lGpad -lGui -lGX11 -lX3d

LCLIBDIR      = $(LCLIBROOT)/lib

#ifdef hitachiArchitecture
EXTRALDOPT = -Wl,-a,default 
CERNLIBS      = -L$(CERN_ROOT)/lib -ljetset74 -lkernlib
#endif

ANALLIB = $(JSFLIBS) $(EXTRALDOPT) \
	-L$(LCLIBDIR) -lGENUTIL -lLUHADR -lTAUOLA \
        -lSIMJLC -lLTKCL -lLCFULL -lBASESV5.1 -lTBS \
        -lHELASV204 -lFORTLIB -lCOM -lCLI \
        $(EXTRALIBS) \
	-L$(JLCSIMROOT)/lib -lct -ljlclib -lvx -lcal -lzbs -ljlcutil

JIMOBJ  = $(JLCSIMROOT)/util/src/getcal.o  $(JLCSIMROOT)/util/src/getcls.o \
	$(JLCSIMROOT)/util/src/getgen.o  $(JLCSIMROOT)/util/src/getmch.o \
	$(JLCSIMROOT)/util/src/gettrk.o  $(JLCSIMROOT)/util/src/getvtx.o 

#-------------------------------------------------------------

INC           = $(JSFROOT)/include 

INCPATH	      = -I$(JLCSIMROOT)/util/inc -I$(JLCSIMROOT)/include/jlc 
FCFLAGS	      = $(FFLAGS)

OBJS          = JSFReadJIMBank.$(ObjSuf) \
		JSFJIMParam.$(ObjSuf) \
		readjim.o $(JIMOBJ) \
		libJSFReadJIMBank.$(ObjSuf)

SRC           = JSFReadJIMBank.$(SrcSuf) \
		JSFJIMParam.$(SrcSuf)

HDRS	      = JSFReadJIMBank.h \
		JSFJIMParam.h


all::  jsf

jsf: $(OBJS) $(JSFROOT)/src/jsfmain.o
	$(LD) $(JSFROOT)/src/jsfmain.o $(BLOCKDATA) $(OBJS) \
	$(LDFLAGS) -o jsf 


clean:: 
	@rm -f $(OBJS) core *.so 
	@rm -f libJSFReadJIMBank.$(SrcSuf) libJSFReadJIMBank.h

depend:: 
	makedepend -I$(ROOTSYS)/include $(SRC)

distclean::
	@rm -f $(OBJS) core *.so $(SONAME).$(SrcSuf) $(SONAME).h *.~ *.o
	@rm -f *.bak libJSFReadJIMBank.*
	@rm -f jsf *.root Makefile 

###

libJSFReadJIMBank.$(SrcSuf): $(HDRS) JSFReadJIMLinkDef.h
		@echo "Generating dictionary ..."
		rootcint -f libJSFReadJIMBank.$(SrcSuf) \
	 	-c -I$(JSFROOT)/include $(HDRS) \
		JSFReadJIMLinkDef.h

#---------------------------------------------------

.SUFFIXES: .$(SrcSuf)

.$(SrcSuf).$(ObjSuf):
	$(CXX) $(CXXFLAGS) -c $<

