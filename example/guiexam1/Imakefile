#---------------------------------------------------

#include    "config/lclib.tmpl"
#include    "conf/makejsf.tmpl"
#if __ROOT_VERSION__ >= 2 && __ROOT_MINORVERSION__ >= 22 
ROOT222LIBS	= -lPhysics
#endif

ROOTLIBS      = -L$(ROOTSYS)/lib -lNew -lBase -lCint -lClib -lCont -lFunc \
                -lGraf -lGraf3d -lHist -lHtml -lMatrix -lMeta -lMinuit -lNet \
                -lPostscript -lProof -lTree -lUnix -lZip 

ROOTGLIBS     = -lGpad -lGui -lGX11 -lX3d


#-------------------------------------------------------------

INC           = $(JSFROOT)/include

OBJJSFGUI     = InputDialog.$(ObjSuf) \
		JSFEventDisplay.$(ObjSuf) \
		JSFGUIFrame.$(ObjSuf) \
		JSFGUIAnalysis.$(ObjSuf) \
		JSFEnvGUIFrame.$(ObjSuf) \
		JSFDemoDisplay.$(ObjSuf) \
		libJSFGUI.$(ObjSuf)

OBJS          = $(OBJJSFGUI)

SRCJSFGUI     = InputDialog.$(SrcSuf) JSFDemoDisplay.$(SrcSuf) \
		JSFEventDisplay.$(SrcSuf) JSFEnvGUIFrame.$(SrcSuf) \
		JSFGUIFrame.$(SrcSuf) JSFGUIAnalysis.$(SrcSuf)

SRC 	      = $(SRCJSFGUI)

HDRJSFGUI     = InputDialog.h \
		JSFEventDisplay.h JSFDemoDisplay.h \
		JSFGUIFrame.h JSFGUIAnalysis.h \
		JSFEnvGUIFrame.h \
		JSFGUILinkDef.h

SOLIBNAME     = libJSFGUI
SONAME	      = $(SOLIBNAME).$(SOEXT)	


#ifdef hitachiArchitecture

CERNLIBS      = -L$(CERN_ROOT)/lib -ljetset74 -lpacklib
JSFLIBS       = -Wl,-L$(JSFROOT)/lib -lJSF -lJSFLCFULL -lJSFQuickSim

ROOTLIBS      = -L$(ROOTSYS)/lib \
		-lEGPythia -lEG $(CERNLIBS) \
		-lNew -lBase -lCint -lClib -lCont -lFunc \
                -lGraf -lGraf3d -lHist -lHtml -lMatrix -lMeta -lMinuit -lNet \
                -lPostscript -lProof -lTree -lUnix -lZip

ROOTGLIBS     = -lGpad -lGui -lGX11 -lX3d

LCLIBDIR      = $(LCLIBROOT)/lib

#ifdef hitachiArchitecture
EXTRALDOPT = -Wl,-a,default 
#endif

ANALLIB = $(JSFLIBS) $(EXTRALDOPT) \
	-L$(LCLIBDIR) -lGENUTIL -lLUHADR -lTAUOLA \
        -lSIMJLC -lLTKCL -lLCFULL -lBASESV5.1 -lTBS \
        -lHELASV204 -lFORTLIB -lCOM -lCLI \
        $(EXTRALIBS)

#endif	

# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

#ifdef hitachiArchitecture
all::  jsf jsfgui
jsf: jsfmain.o $(OBJJSFGUI)
	$(LD) jsfmain.o $(BLOCKDATA) $(OBJJSFGUI) \
	$(LDFLAGS) -o jsf 

jsfgui: 
	rm -f ../../bin/jsfgui
	ln -s $(JSFROOT)/example/guiexam1/jsf ../../bin/jsfgui

jsfmain.cxx:
	ln -s ../../src/jsfmain.cxx jsfmain.cxx
#else
all::  libgui
libgui: $(OBJJSFGUI)
	$(LD) $(SOFLAGS) $(OBJJSFGUI) -o  $(SONAME)
#endif

clean:: 
	@rm -f $(OBJS) core *.so *~
	@rm -f libJSFGUI.$(SrcSuf) libJSFGUI.h

depend:: 
	makedepend -I$(ROOTSYS)/include -I$(JSFROOT)/include \
	$(SRC) $(HDRJSFGUI)

distclean:: clean
	@rm -f $(OBJS) core *.so *.~ *.o *.root *.dat Makefile

web:	
	jsf -q -b html.C 

###

libJSFGUI.$(SrcSuf): $(HDRJSFGUI)
		@echo "Generating dictionary ..."
		rootcint -f libJSFGUI.$(SrcSuf) \
	 	-c -I$(JSFROOT)/include $(HDRS) $(HDRJSFGUI)

#
