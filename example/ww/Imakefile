XCOMM #---------------------------------------------------
XCOMM #$Id$
XCOMM #---------------------------------------------------

#include "config/lclib.tmpl"
#include "conf/makejsf.tmpl"

#if defined(MacOSXArchitecture) || defined(DarwinArchitecture)
ROOTLIBS     += -l$(EGPYTHIA) -lEG $(CERNLIBS)
#elif defined(AIXArchitecture)
ROOTLIBS     += -l$(EGPYTHIA) -lEG -Wl,-u,pytest_ $(shell cernlib mathlib)
#else
ROOTLIBS     += -l$(EGPYTHIA) -lEG -Wl,-u,pytest_ $(CERNLIBS)
#endif

#if __PYTHIA_VERSION__ >= 6
ANALLIB   = $(JSFLIBS) \
	    -L$(LCLIBROOT)/lib -lLCFULL -lGENUTIL -lTAUOLA \
	    -lLTKCL -lHELASV204 -lSIMJLC -lFORTLIB  \
	    -lTBS -lLCFULL -lGENUTIL -lCOM -lCLI  \
	    -lHPKTOHBK -lFORTLIB -lTBS 
#else
ANALLIB   = $(JSFLIBS) \
	    -L$(LCLIBROOT)/lib -lLCFULL -lGENUTIL -lLUHADR -lTAUOLA \
	    -lLTKCL -lHELASV204 -lSIMJLC -lFORTLIB  \
	    -lTBS -lLCFULL -lGENUTIL -lCOM -lCLI  \
	    -lHPKTOHBK -lFORTLIB -lTBS 
#endif

INCPATH = -I$(LCLIBROOT)/simjlc/src -I$(LCLIBROOT)/util/fortlib/src 
INCPATH += -I$(JSFROOT)/include


XCOMM #-------------------------------------------------------------

FOBJS         = wwdcy.o wwamp.o coupla.o wwspr.o boost0.o

OBJS          = WWSpring.$(ObjSuf) \
		$(SOLIBNAME).$(ObjSuf)

SRC           = WWSpring.$(SrcSuf) 

HDRS	      = WWSpring.h

SOLIBNAME     = libWWSpring

all::  jsf

jsf: $(OBJS) jsfmain.o $(FOBJS)
	$(CXX) jsfmain.o $(FOBJS) $(BLOCKDATA) $(OBJS) $(LDFLAGS) -o jsf

clean:: 
	@rm -f $(OBJS) core *.so $(SOLIBNAME).*

depend:: $(SRC) $(HDR)
	for i in $(SRC); do \
	rmkdepend -a -- $(DEPENDFILES) -- $$i; done

distclean::
	@rm -f $(OBJS) core *.so $(SOLIBNAME).* *~ *.o
	@rm -f PYTHIA.SEED *.bak
	@rm -f jsf *.root Makefile 

web:	
	jsf -q -b html.C 

$(SOLIBNAME).$(SrcSuf): $(HDRS) LinkDef.h
		@echo "Generating dictionary ..."
		rootcint -f $(SOLIBNAME).$(SrcSuf) \
	 	-c -I$(JSFROOT)/include $(HDRS) LinkDef.h




