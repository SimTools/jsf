/********************************************************/
/* Imakefile to create a Bases Library 			*/
/* 							*/
/* Created by A.Miyamoto  8-Feb-2000			*/
/********************************************************/

#include "conf/makejsf.tmpl"


OBJS   	=BasesSpring.$(ObjSuf) bs_variable.$(ObjSuf) \
	bs_hist.$(ObjSuf) bases_hist.$(ObjSuf) \
	bases_xhist.$(ObjSuf) bases_scat.$(ObjSuf) \
	bases_ran1.$(ObjSuf) uxtime.$(ObjSuf) uxdate.$(ObjSuf)

SRCS   	= $(subst .$(ObjSuf),.$(SrcSuf),$(OBJS))

HDRS	= BasesSpring.h bases_scat.h  bs_hist.h hist_bin.h \
	bases_hist.h bases_xhist.h bs_variable.h hist_buff.h \
	bases_ran1.h

LIBBASES = libBasesSpring.$(DylibSuf)

all:: $(LIBBASES) install

$(LIBBASES): $(OBJS)
	$(LD) $(DYLIBFLAGS) $(OBJS) -o $(LIBBASES)
#	$(LD) $(DYLDFLAGS) $(OBJS) -o $(LIBBASES)  $(DYLDEXTRALIBS)

install:: $(LIBBASES)
	mkdir -p $(JSFROOT)/lib
	mv $(LIBBASES) $(JSFROOT)/lib
	for h in $(HDRS) ; do \
	   ( cd $(JSFROOT)/include ; \
	   ln -sf ../share/bases/src/$$h . ) ; done

depend:: $(SRCS) $(HDRS)
	for i in $(SRCS); do \
        rmkdepend -a -- $(DEPENDFILES) -- $$i; done

clean::
	\rm -f *.o

distclean:: clean
	rm Makefile

