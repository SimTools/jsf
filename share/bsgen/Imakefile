XCOMM  
XCOMM  $Id$
XCOMM

#include "conf/makejsf.tmpl"
#include "config/lclib.tmpl"

PROGNAME = JSFBeamGeneration

SRC     = $(PROGNAME).$(SrcSuf)

OBJS    = $(subst .$(SrcSuf),.$(ObjSuf),$(SRC)) \
	  lib$(PROGNAME).$(ObjSuf)

HDRS    = $(subst .$(SrcSuf),.h,$(SRC))

#ifdef AIXArchitecture
AIXFLAGS += -L$(ROOTSYS)/lib -lCore -lCint -lHist
#endif


all:: install

install:: lib$(PROGNAME).$(DylibSuf)
	cp lib$(PROGNAME).$(DylibSuf) $(JSFROOT)/lib
	( cd $(JSFROOT)/include ; ln -fs ../share/bsgen/JSFBeamGeneration.h . )

lib$(PROGNAME).$(DylibSuf): $(OBJS) $(FOBJS)
	$(LD) $(DYLIBFLAGS) $(OBJS) $(FOBJS) -o lib$(PROGNAME).$(DylibSuf) $(ADDOBJ) \
	$(AIXFLAGS)

depend:: $(SRC) $(HDR)
	for i in $(SRC); do \
	rmkdepend -a -- $(DEPENDFILES) -- $$i; done


lib$(PROGNAME).$(SrcSuf): $(HDRS) $(PROGNAME)LinkDef.h
	rootcint -f $@ -c -I$(JSFROOT)/include \
	$(HDRS) $(PROGNAME)LinkDef.h 

clean::
	rm -f lib$(PROGNAME).*

distclean:: clean
	rm -f Makefile
	rm -f $(JSFROOT)/lib/lib$(PROGNAME).$(DylibSuf)
	rm -f genbeam.root genbeam2.root

XCOMM  web:
XCOMM  	jsf -q -b html.C


