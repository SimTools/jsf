
#include "conf/makejsf.tmpl"
#include "config/lclib.tmpl"

SRC     = JSFJETNET.$(SrcSuf)

OBJS    = $(subst .$(SrcSuf),.$(ObjSuf),$(SRC)) \
	  libJSFJETNET.$(ObjSuf)

FOBJS   = jetnet_35.o

HDRS    = $(subst .$(SrcSuf),.h,$(SRC))


# CERNLIBS      = $(shell cernlib jetset74 packlib)
# ROOTLIBS     += -lEGPythia -lEG $(CERNLIBS)
# LCLIBDIR      = $(LCLIBROOT)/lib

# CXXFLAGS += -I$(KFLIBROOT)/Anlib/src -I$(JSFROOT)/example/guiexam1
# EXTRALDOPT += -L$(JSFROOT)/example/guiexam1 -lJSFGUI

# FFLAGS += -I$(LCLIBROOT)/simjlc/src \
# 	  -I$(LCLIBROOT)/util/fortlib/src

# ADDOBJ = $(LCLIBROOT)/util/fortlib/src/uconfl.o

#ifdef AIXArchitecture
AIXFLAGS += $(KFLIBROOT)/lib/libAnlib.so $(JSFLIBS) -L$(LCLIBDIR) \
	-L/dfs/g/jlc/soft/root/pro/lib -lCore -lCint -lHist -lGraf \
	-lTree -lRint -lMatrix -lPhysics -lxlf90 -lm \
	-L/cern/pro/lib -lkernlib
#endif

all:: install

install:: libJSFJETNET.$(DllSuf)
	cp libJSFJETNET.$(DllSuf) $(JSFROOT)/lib

libJSFJETNET.$(DllSuf): $(OBJS) $(FOBJS)
	$(LD) $(SOFLAGS) $(OBJS) $(FOBJS) -o libJSFJETNET.$(DllSuf) $(ADDOBJ) \
	$(AIXFLAGS)

depend:: $(SRC) $(HDR)
	for i in $(SRC); do \
	rmkdepend -a -- $(DEPENDFILES) -- $$i; done


libJSFJETNET.$(SrcSuf): $(HDRS) JSFJETNETLinkDef.h
	rootcint -f $@ -c -I$(JSFROOT)/include \
	$(HDRS) JSFJETNETLinkDef.h 

clean::
	rm -f libJSFJETNET.*

cleanall:: clean
	rm -f Makefile
	rm -f $(JSFROOT)/lib/libJSFJETNET.$(DllSuf)

web:
	jsf -q -b html.C


